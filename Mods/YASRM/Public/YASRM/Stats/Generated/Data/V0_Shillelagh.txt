// 1. Adds weapon disarm protection
// 2. Uses best casting Ability modifier
// 3. Lasts until weapon is unequipped
// 4. Allows more weapon types
// 5. Has level scaling

new entry "Shout_Shillelagh"
type "SpellData"
data "SpellType" "Shout"
using "Shout_Shillelagh"
data "SpellProperties" "IF(YASRM_VAL_SHILL(GetActiveWeapon())):ApplyEquipmentStatus(MainHand, SHILLELAGH, 100, -1);IF(YASRM_VAL_SHILL(GetActiveWeapon(context.Target, false))):ApplyEquipmentStatus(OffHand, SHILLELAGH, 100, -1);AI_ONLY:IF(not HasStatus('SHILLELAGH',GetActiveWeapon())):ApplyStatus(AI_HELPER_SHILLELAGH,100,-1)"
data "Description" "h9e64e353g526cg4e4cg87a4gccf2e62bb6d3;1"
data "DescriptionParams" "DealDamage(LevelMapValue(YASRM_Shillelagh)+max(IntelligenceModifier,WisdomModifier,CharismaModifier), Bludgeoning)"
data "TooltipStatusApply" "ApplyStatus(SHILLELAGH, 100, -1)"
data "RequirementConditions" "YASRM_VAL_SHILL(GetItemInEquipmentSlot(EquipmentSlot.MeleeMainHand)) or YASRM_VAL_SHILL(GetItemInEquipmentSlot(EquipmentSlot.MeleeOffHand))"

// Not being able to rig up GetOwner(context.Source).LevelMapValue(...) or similar is annoying
new entry "SHILLELAGH"
type "StatusData"
data "StatusType" "BOOST"
using "SHILLELAGH"
data "DescriptionParams" "DealDamage(LevelMapValue(YASRM_Shillelagh)+max(IntelligenceModifier,WisdomModifier,CharismaModifier), Bludgeoning)"
data "Boosts" "WeaponProperty(Magical);Attribute(InventoryBound);CannotBeDisarmed();IF(YASRM_SHIL_LV1()):WeaponDamageDieOverride(1d8);IF(YASRM_SHIL_LV5()):WeaponDamageDieOverride(1d10);IF(YASRM_SHIL_LV11()):WeaponDamageDieOverride(1d12);IF(YASRM_SHIL_LV17()):WeaponDamageDieOverride(2d12);IF(YASRM_SHIL_C()):WeaponAttackRollAbilityOverride(Charisma);IF(YASRM_SHIL_W()):WeaponAttackRollAbilityOverride(Wisdom);IF(YASRM_SHIL_I()):WeaponAttackRollAbilityOverride(Intelligence);"