// Fixes tooltips
// Fixes saving throw
// Increases max size and targetting range
// works with elemental adept fire

new entry "Wall_WallOfFire"
type "SpellData"
data "SpellType" "Wall"
using "Wall_WallOfFire"
data "TooltipUpcastDescriptionParams" "DealDamage(1d8,Fire)"
data "TargetRadius" "24"
data "MaxDistance" "12"

new entry "WALLOFFIRE"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE"
data "AuraStatuses" "IF(not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(WALLOFFIRE_AURA)"
data "Boosts" "IF(HasPassive('ElementalAdept_Fire', GetSummoner(context.Source))):IgnoreResistance(Fire,Resistant);IF(MainDamageTypeIs(DamageType.Fire) and HasPassive('ElementalAdept_Fire', GetSummoner(context.Source))):MinimumRollResult(Damage,2)"

// Why is evasion implemented like this?
new entry "WALLOFFIRE_AURA"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA"
data "OnApplyRoll" "WallOfFireCheck(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility, GetSummoner(context.Source)))"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') and not HasEvasion()):DealDamage(5d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') and HasEvasion()):DealDamage(5d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') and not HasEvasion()):DealDamage(5d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED',context.Target)):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED,100,1)"
data "OnTickRoll" "WallOfFireCheck(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility, GetSummoner(context.Source)))"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED', 0.1) and not HasEvasion()):DealDamage(5d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED', 0.1) and HasEvasion()):DealDamage(5d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED', 0.1) and not HasEvasion()):DealDamage(5d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED,100,1)"

new entry "WALLOFFIRE_AURA_5"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA_5"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') and not HasEvasion()):DealDamage(6d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') and HasEvasion()):DealDamage(6d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_5,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') and not HasEvasion()):DealDamage(6d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_5,100,1)"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_5', 0.1) and not HasEvasion()):DealDamage(6d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_5', 0.1) and HasEvasion()):DealDamage(6d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_5,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_5') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_5', 0.1) and not HasEvasion()):DealDamage(6d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_5,100,1)"

new entry "WALLOFFIRE_AURA_6"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA_6"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') and not HasEvasion()):DealDamage(7d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') and HasEvasion()):DealDamage(7d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_6,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') and not HasEvasion()):DealDamage(7d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_6,100,1)"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_6', 0.1) and not HasEvasion()):DealDamage(7d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_6', 0.1) and HasEvasion()):DealDamage(7d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_6,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_6') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_6', 0.1) and not HasEvasion()):DealDamage(7d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_6,100,1)"

new entry "WALLOFFIRE_AURA_7"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA_7"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') and not HasEvasion()):DealDamage(8d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') and HasEvasion()):DealDamage(8d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_7,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') and not HasEvasion()):DealDamage(8d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_7,100,1)"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_7', 0.1) and not HasEvasion()):DealDamage(8d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_7', 0.1) and HasEvasion()):DealDamage(7d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_7,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_7') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_7', 0.1) and not HasEvasion()):DealDamage(8d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_7,100,1)"

new entry "WALLOFFIRE_AURA_8"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA_8"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') and not HasEvasion()):DealDamage(9d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') and HasEvasion()):DealDamage(9d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_8,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') and not HasEvasion()):DealDamage(9d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_8,100,1)"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_8', 0.1) and not HasEvasion()):DealDamage(9d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_8', 0.1) and HasEvasion()):DealDamage(7d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_8,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_8') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_8', 0.1) and not HasEvasion()):DealDamage(9d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_8,100,1)"

new entry "WALLOFFIRE_AURA_9"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFFIRE_AURA_9"
data "OnApplySuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') and not HasEvasion()):DealDamage(10d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') and HasEvasion()):DealDamage(10d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_9,100,1)"
data "OnApplyFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') and not HasEvasion()):DealDamage(10d8/2,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9')):ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_9,100,1)"
data "OnTickSuccess" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_9', 0.1) and not HasEvasion()):DealDamage(10d8,Fire,Magical);IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_9', 0.1) and HasEvasion()):DealDamage(7d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_9,100,1)"
data "OnTickFail" "IF(not HasStatus('WALLOFFIRE_DAMAGE_RECEIVED_9') or StatusDurationLessThan(context.Source, 'WALLOFFIRE_DAMAGE_RECEIVED_9', 0.1) and not HasEvasion()):DealDamage(10d8/2,Fire,Magical);ApplyStatus(WALLOFFIRE_DAMAGE_RECEIVED_9,100,1)"
