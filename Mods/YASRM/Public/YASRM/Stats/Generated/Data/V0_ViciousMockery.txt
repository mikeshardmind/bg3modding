// uses modified cantrip scaling, adjusted to a d6
// changed to a charisma save
// lasts until end of target's next turn (or end of combat) instead of on next attack roll.
// applys a -3 penalty rather than Disadvantage
// doesn't require line of sight (maybe should do a more advanced targetting restriction in the future?)

new entry "Target_ViciousMockery"
type "SpellData"
data "SpellType" "Target"
using "Target_ViciousMockery"
data "SpellRoll" "not SavingThrow(Ability.Charisma, SourceSpellDC())"
data "SpellSuccess" "ApplyStatus(VICIOUSMOCKERY,100,1);DealDamage(LevelMapValue(YASRM_D6Cantrip)+2,Psychic,Magical)"
data "SpellFail" "IF(HasPassive('PotentCantrip',context.Source)):DealDamage((LevelMapValue(YASRM_D6Cantrip)+2)/2,Psychic,Magical);IF(not HasPassive('PotentCantrip',context.Source)):ApplyStatus(SAVED_AGAINST_HOSTILE_SPELL,100,0)"
data "Description" "h37242afcgfda9g4c1bg93aege165fedb3c36;1"
data "TooltipDamageList" "DealDamage(LevelMapValue(YASRM_D6Cantrip)+2,Psychic)"
data "TooltipAttackSave" "Charisma"
data "SpellFlags" "IsSpell;HasVerbalComponent;IsHarmful;IgnoreVisionBlock"

new entry "VICIOUSMOCKERY"
type "StatusData"
data "StatusType" "BOOST"
using "VICIOUSMOCKERY"
data "TickType" "EndTurn"
data "Boosts" "RollBonus(Attack,-3)"
data "RemoveEvents" "OnTurn;OnCombatEnded"
data "RemoveConditions" ""
data "Description" "ha5df747ag7290g4789ga0aeg3befd81dc916;1"
data "StatusPropertyFlags" "InitiateCombat;BringIntoCombat"
