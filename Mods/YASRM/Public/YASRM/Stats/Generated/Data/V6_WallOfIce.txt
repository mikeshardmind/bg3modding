// Fixes saving throw
// Increases max size and targetting range
// works with elemental adept cold

new entry "Wall_WallOfIce"
type "SpellData"
data "SpellType" "Wall"
using "Wall_WallOfIce"
data "TargetRadius" "24"
data "MaxDistance" "12"

new entry "WALLOFICE"
type "StatusData"
data "StatusType" "BOOST"
using "WALLOFICE"
data "Boosts" "IF(HasPassive('ElementalAdept_Cold',GetSummoner(context.Source))):IgnoreResistance(Cold,Resistant);IF(HasPassive('ElementalAdept_Cold',GetSummoner(context.Source))):MinimumRollResult(Damage,2)"

new entry "ICECLOUD"
type "StatusData"
data "StatusType" "BOOST"
using "ICECLOUD"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution,CalculateSpellDC(context.PreferredCastingAbility,GetSummoner(context.Source)))"

new entry "Projectile_Wall_Of_Ice_Explode"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Wall_Of_Ice_Explode"
data "SpellRoll" "not SavingThrow(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility,GetSummoner(context.Source)))"

// expansion perpetuates the vanilla DC bug explicitly rather than just inheriting the spell roll, gotta fix it too

new entry "Projectile_Wall_Of_Ice_Explode_7"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Wall_Of_Ice_Explode_7"
data "SpellRoll" "not SavingThrow(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility,GetSummoner(context.Source)))"

new entry "Projectile_Wall_Of_Ice_Explode_8"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Wall_Of_Ice_Explode_8"
data "SpellRoll" "not SavingThrow(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility,GetSummoner(context.Source)))"

new entry "Projectile_Wall_Of_Ice_Explode_9"
type "SpellData"
data "SpellType" "Projectile"
using "Projectile_Wall_Of_Ice_Explode_9"
data "SpellRoll" "not SavingThrow(Ability.Dexterity,CalculateSpellDC(context.PreferredCastingAbility,GetSummoner(context.Source)))"

